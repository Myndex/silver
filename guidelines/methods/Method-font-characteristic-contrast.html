<!--
Code for the tabbed interface for this W3C Silver Prototype was lovingly ripped from https://inclusive-components.design/tabbed-interfaces/ with the example code taken from https://codepen.io/heydon/pen/veeaEa .

All credit for this goes to Heydon Pickering https://twitter.com/heydonworks.
You should totally buy his book on Inclusive Components.
-->

<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Select font characteristics and colors to provide enough contrast</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
<p class="breadcrumb"><a href="../../guidelines/index.html">Silver</a> > <a href="../explainers/VisualContrast.html">Visual Contrast</a> > Select font characteristics and colors to provide enough contrast </p>
    <div class="tabbed">
      <ul>
        <li>
          <a href="#section1">Basics</a>
        </li>
        <li>
          <a href="#section2">Detailed<br />Description</a>
        </li>
        <li>
           <a href="#section3">Code<br />Samples</a>
        </li>
		 <li>
           <a href="#section4">Tests</a>
        </li>
         <li>
           <a href="#section5">Resources</a>
        </li>
		<li>
           <a href="#section6">Changelog</a>
        </li>
      </ul>

<section id="section1">
<h2>Basics</h2>
<div class="guidanceBox">
<h3>Select font characteristics and colors for both the background and the text to provide enough contrast for readability</h3>
	<p>Use tools to evaluate font size, font stroke width, background color, font color, and nearby colors and adjust the attribute and color of those elements to achieve good visual contrast. </p>
</div>
<h3>Status</h3>
<ul>
<li>Last Updated: 03 February 2020
<li>New
</ul> 
<h3>Platform</h3>
<p>Web
</p>
<h3>Programming Language</h3>
<ul>
<li>HTML - all versions
<li>CSS - all versions
<li>Any web technology where text and background color are specified separately and browsers can control default colors. 
</ul>
<h3>How It Solves User Need</h3>
<p>All users need adaquate luminance difference between background and text colors in order to perceive and read the text easily.
</p>
<h3>Related Guidelines</h3>
<ul>
<li>TBD
</ul>
</section>

	    
	    
<section id="section2">
<h2>Detailed Description</h2>
<div class="guidanceBox">
<h3>Select font characteristics and colors for both the background and the text to provide enough contrast for readability </h3>
</div>

	
	
<h2 id="understanding">Understanding Contrast Perception</h2>
<dl id="">
  <dt></dt>
  <dd>
    <p>As used on this page, Visual Contrast means the perceived difference between two colors displayed on a computer monitor, such as the color of the text against the color of the background. Our perception of contrast is a function of the Human Visual System (HVS) which includes the eye, optic nerve, and several areas of the brain that are either dedicated to processing vision, or that share vision processing with other senses such as hearing.</p>
	<p>The eye consists of an optical portion including a lens, and a light sensitive portion known as the retina. Muscles in the eye adjust the shape of the lens to adjust the focus of incoming light, so that an image of the world around us is focused onto the retina. Light sensitive cells on the retina then convert light into electrical impulses that are sent to the brain's vision processing center, called the visual cortex.</p>
	<p>Our perception of contrast and ultimately the readability of text is affected by many interdependant factors, including:
	<ul>
		<li>The user's personal vision quality in terms of sharpness, glare, and contrast capability		
		<li>Font weight or stroke width, and font size
		<li>The lightness or darkness difference between the background and the text
		<li>The overall lightness or darkness of the screen and the light in the room as this affect the eye's light or dark adaptation to the environment
		<li>The padding and spacing around the text which affects the eye's local adaptation to the text area	
		<li>The hue or color difference between the background and text, not including the lightness difference	mentioned above
	  </ul>
	<p>All of these interdependant factors affect the perception of contrast and readability. As we are concerned with readability on computer screens, we can made some assumptions about a range of brightness, and a typical viewing environment. This provides a baseline standard for all users for best readability of content, or a minimum level of legibility for non-content. Then, we can set how different impairments require different adjustments or user customization to accomodate the neads of each individual user.</p>
	  <p>For instance, a user with poor "acuity", that is, poor sharpness where they cannot focus on small text, will need to be able to zoom the text larger. A user with poor contrast sensitivity may have good sharpness, but unable to perceive colors that are too similar in lightness. Yet another user with a glare problem may need lower contrast, and/or a reduction in blue, to reduce glare or halos interfereing with readability. Those with a color vision problem (sometimes called 'color blind') may have difficulty detecting contrast or light for certain colors, such as deep red.

	    
	    </p>

  </dd>
</dl>
<div>
  
</div>
<dl id="">
  <h3>Predicted Contrast</h3>
  <dd>
    
  </dd>
</dl>
<div><span></span>
  <p>Predicted contrast is reported as a percentage using the methods in this guideline, based on the CSS color values in sRGB colorspace, and with device default antialiasing**. The TESTS section has a lookup table for specific font and contrast combinations, but as a general guide:</p>
	  
	  <ul>
	<li>25% is the point of invisibility (<em>i.e., no perceptable contrast</em>) for many people with contrast related impairments. Designers should assume that contrsts lower than this may be invisible to some users.
	<li>60% for Large, Bold Headlines where the major stroke width is at least 8px (6pt), or Non-text elements that are at least a solid 8x8px square such as buttons.
	<li>60% For Bold Text no less than 16px (12pt) or non-text elements no less than 3px in the thinnest dimension.
	<li>80% Normal Weight Text no less than 16px (12pt) or non-text with a minimum stroke of 2px.
	<li>100% 300 Weight Text no less than 16px (12pt) or non-text with a minimum stroke of 1px.
	</ul>	
		
		
  <p>Note: **These values require that "Webkit-Font-Smoothing" be at the device or user agent default, such that <em>added</em> antialiasing is not enabled.</p>
</div>
<h3>Related Methods</h3>
<p><a href="Method-visual-contrast-default.html">Use default fonts and colors.</a>
</p>
<h3>Alternate Meanings</h3>
	<p>It's useful to point out that the term “Visual Contrast” can also be used to describe the differences of other visual perceptions: Contrast of size difference, contrast of position, contrast of speed or motion, etc. but these are not covered in this guideline at this time.</p>
</section>

	    
	    
	    
<section id="section3">
<h2>Code Samples</h2>
<div class="guidanceBox">
<h3>Select font characteristics and colors for both the background and the text to provide enough contrast for readability</h3>
</div>
	<h2>Pseudocode</h2>		
<p>TBD
</p>
</section>

	    
<section id="section4">
<h2>Tests</h2>
<div class="guidanceBox">
<h3>Select font characteristics and colors for both the background and the text to provide enough contrast for readability</h3>
</div>
	
<h3>Procedure</h3>
<ol>
<li>Using source code inspection of the text and background elements, obtain representaive sRGB values for the forground text (Vtxt) and the background color (Vbg). 
	<ul>
	<li>If an “eye dropper” type tool is used it must report the true CSS value of the color, not the displayed value. 
	<li>Steps #2 and #3 refer to an automated contrast prediction tool. 
	<li>Note: Since this is a new formula, we have provided a link to a tool for users to comment on this new algorithm.  <a href="https://www.myndex.com/SAPC/">sRGB Advanced Perceptual Contrast (SAPC) Visual Contrast Demo</a>
<li>Enter the background Vbg and text Vtxt CSS color values in the background and text input fields of the contrast tool. <b>Important: do not swap the background or text colors in the too.</b>
<li>Calculate the predicted contrast percentage of Vtxt to background Vbg.
<li>Compare this calculated value against the lookup table "Accessible Contrast by Font Size and Weight".
<li>Check that the absolute value of the predicted contrast percentage meets or exceeds the required value for the font weight and size.
</ol>
	
<h3>Accessible Contrast by Font Size and Weight</h3>
	
	
<p>Lookup Table by Font Size (left-most column) and Weight (top-most row).
Directions:  
<ul>
<li>Cross index nominal font size (in CSS px) to CSS weight.  
<li>SAPC value must meet or exceed the value listed.  
<li>For light text on a dark background the SAPC tool will show a negative percentage. Simply use the absolute (positive) value. For example, if the SAPC value is -58, use 58.  
<li>A dot “•” indicates that a larger font size (or heavier font weight) must be used.
<li>Values shown are for standard sans-serif fonts with an x-height no less than 50% of the font-size such as Helvetica, Arial, or Verdana.
<li>Serif fonts should use values for the next higher weight (next column to the right) (e.g., Times, Georgia, Cambria, Courier).
<li>Decorative and unusual fonts should be avoided for readable content in columns of body text. These fonts may be used for headers or other stand alone items, provided they are clearly legible.
<li>Due to the vast variety of font designs, designers should visually compare an unusual font to a standard font such as Helvetica, choosing a sie and weight of Helvetica that most closesly matches the appearance to determine the appropriate contrast percentage. 
</ul>
</p>
<table class="TFtable">
<tr>
<th>Font</br />Size</th><th>100</th><th>200</th><th>300</th><th>Normal</br />(400)</th><th>500</th><th>600</th><th>Bold</br />(700)</th><th>800</th><th>900</th>
</tr>
<tr>
<td>12</td><td>•</td><td>•</td><td>•</td><td>100</td><td>90</td><td>85</td><td>80</td><td>75</td><td>70</td>
</tr>
<tr>
<td>14</td><td>•</td><td>•</td><td>•</td><td>90</td><td>85</td><td>80</td><td>75</td><td>70</td><td>65</td>
</tr>
<tr>
<td>16</td><td>•</td><td>•</td><td>•</td><td>85</td><td>80</td><td>75</td><td>70</td><td>65</td><td>60</td>
</tr>
<tr>
<td>18</td><td>•</td><td>•</td><td>100</td><td>80</td><td>75</td><td>70</td><td>65</td><td>60</td><td>58</td>
</tr>
<tr>
<td>20</td><td>•</td><td>•</td><td>90</td><td>77</td><td>70</td><td>65</td><td>60</td><td>58</td><td>57</td>
</tr>
<tr>
<td>24</td><td>•</td><td>100</td><td>80</td><td>73</td><td>67</td><td>60</td><td>58</td><td>57</td><td>56</td>
</tr>
<tr>
<td>26</td><td>x</td><td>97</td><td>75</td><td>70</td><td>63</td><td>58</td><td>55</td><td>58</td><td>55</td>
</tr>
<tr>
<td>28</td><td>•</td><td>93</td><td>70</td><td>67</td><td>60</td><td>56</td><td>54</td><td>56</td><td>52</td>
</tr>
<tr>
<td>30</td><td>•</td><td>90</td><td>65</td><td>63</td><td>57</td><td>54</td><td>53</td><td>52</td><td>51</td>
</tr>
<tr>
<td>32</td><td>•</td><td>87</td><td>60</td><td>60</td><td>55</td><td>52</td><td>50</td><td>49</td><td>48</td>
</tr>
<tr>
<td>34</td><td>•</td><td>83</td><td>59</td><td>57</td><td>53</td><td>50</td><td>49</td><td>48</td><td>46</td>
</tr>
<tr>
<td>36</td><td>120</td><td>80</td><td>58</td><td>53</td><td>50</td><td>48</td><td>47</td><td>46</td><td>44</td>
</tr>
<tr>
<td>40</td><td>110</td><td>75</td><td>56</td><td>50</td><td>47</td><td>46</td><td>45</td><td>44</td><td>43</td>
</tr>
<tr>
<td>48</td><td>100</td><td>70</td><td>54</td><td>47</td><td>46</td><td>45</td><td>44</td><td>43</td><td>42</td>
</tr>
<tr>
<td>56</td><td>90</td><td>65</td><td>52</td><td>43</td><td>43</td><td>42</td><td>42</td><td>41</td><td>41</td>
</tr>
<tr>
<td>64</td><td>80</td><td>60</td><td>50</td><td>40</td><td>40</td><td>40</td><td>40</td><td>40</td><td>40</td>
</tr>
</table>
<h3>Expected Results</h3>
<ul>
    <li>#5 is true.
</ul>

</section>

<section id="section5">
<h2>Resources</h2>
<div class="guidanceBox">
<h3>Select font characteristics and colors for both the background and the text to provide enough contrast for readability </h3>
</div>

	
<h2 id="math">SAPC Math</h2>
	
<div>SAPC is the sRGB Advanced Perceptual Contrast prediction algorithm. The math assumes the use of the web standard sRGB colorspace.

	<p>The simplified steps are:</p>
	<ul>
		<li>Convert the sRGB background and text colors to luminance Ybg and Ytxt
			<ul>
				<li>Convert from 8 bit integer to decimal 0.0-1.0
				<li>Linearize (remove gamma)
				<li>Apply sRGB coefficients and sum to Y<br>
					<img src="images/sRGBcoefficients.png">
					
			
		<li>Determine which is brighter for contrast polarity
		<li>Apply pre-process modules (clamp, <em>FUTURE: color, spatial, adaptation</em>)
		<li>Apply power curve exponents for perceptual lightness
		<li>Find difference and scale to output percentage	
	</ul>
	
	<h2>Basic SAPC Math Method Step by Step</h2>	

	
  <p>In the sRGB colorspace, using CSS color values as integers, with a background color sRGB<sub>bg</sub> and a text color sRGB<sub>txt</sub> convert each channel to decimal 0.0-1.0</p>
	  
<ul>
    <li>dR<sub>bg</sub> = sR<sub>bg</sub>/255.0</li>
    <li>dG<sub>bg</sub> = sG<sub>bg</sub>/255.0</li>
    <li>dB<sub>bg</sub> = sB<sub>bg</sub>/255.0</li>
    <li>dR<sub>txt</sub> = sR<sub>txt</sub>/255.0</li>
    <li>dG<sub>txt</sub> = sG<sub>txt</sub>/255.0</li>
    <li>dB<sub>txt</sub> = sB<sub>txt</sub>/255.0</li>		
  </ul>
			
<p>Convert the gamma encoded RGB channels to linear values. <em>We will use the simple exponent, and not the piecewise sRGB transfer curve, as we are emulating display gamma and not performing image processing.</em>   The &ldquo;^&rdquo; character is the exponentiation operator.</p>
			
  <ul>
    <li><strong>R<sub>linbg</sub></strong> = dR<sub>bg</sub> ^ 2.218</li>
    <li><strong>G<sub>linbg</sub></strong> = dG<sub>bg</sub> ^ 2.218</li>
    <li><strong>B<sub>linbg</sub></strong> = dB<sub>bg</sub> ^ 2.218</li>
    <li><strong>R<sub>lintxt</sub></strong> = dR<sub>txt</sub> ^ 2.218</li>
    <li><strong>G<sub>lintxt</sub></strong> = dG<sub>txt</sub> ^ 2.218</li>
    <li><strong>B<sub>lintxt</sub></strong> = dB<sub>txt</sub> ^ 2.218</li>	  
  </ul>			
	  
<p>Then find the relative luminance (<var>Y</var>) of each color by applying the coefficients and summing.</p>
			
<strong>Y<sub>bg</sub></strong> = 0.2126 * R<sub>linbg</sub> + 0.7156 * G<sub>linbg</sub> + 0.0722 * B<sub>linbg</sub> 
<strong>Y<sub>txt</sub></strong> = 0.2126 * R<sub>lintxt</sub> + 0.7156 * G<sub>lintxt</sub> + 0.0722 * B<sub>lintxt</sub> 
			
</div>
<dl id="dfn-relative-contrast">
  <dt>Predicted Contrast</dt>
  <dd>
    <p>The Predicted Visual Contrast (<var>C</var>) between a foreground color and a background color expressed as a percentange is defined as:</p>
	  
    <pre>
      if Y<sub>bg</sub> &gt; Y<sub>txt</sub> then {
		  	Ytxt = (Ytxt > blkThrs) ? Ytxt : Ytxt + abs(Ytxt - blkThrs) ^ blkClmp;
			SAPC = ( Y<sub>bg</sub> ^ normBGExp - Ytxt ^ normTXTExp ) * scaleBoW;
			return (SAPC < 15 ) ? "0%" : str(SAPC) + "%";
		} else {
			Y<sub>bg</sub>g = (Y<sub>bg</sub> > blkThrs) ? Y<sub>bg</sub> : Y<sub>bg</sub> + abs(Y<sub>bg</sub> - blkThrs) ^ blkClmp;
			SAPC = ( Ybg ** revBGExp - Ytxt ** revTXTExp ) * scaleWoB;
			return (SAPC > -15 ) ? "0%" : str(SAPC) + "%";
		}  
    </pre>

  </dd>
</dl>
<div><span>Note:</span>
  <p>Relative contrast ranges from 0 to ???? and 25% is the point of invisibility (<em>i.e.</em>, no perceptable contrast) for many people.</p>
  <p>The &ldquo;^&rdquo; character is the exponentiation operator.</p>
</div>
	
<dl>
<dt>TBD</dt>
<dd></dd>
</dl>
<hr>	
<h2 id="glossary">Glossary</h2>
<ul>
<li><stong>Light — </stong>visible light is energy in a narrow range of frequencies or wavelengths that can be detected or sensed by “photo sensitive cells” in the back of the eye. 
<li><stong>Color — </stong>color is not real, but a perception or interpretation by visual processing in the brain (in the brain’s visual cortex) of stimulus from photosensitive cells in the eye. 
<ul><li><stong>Hue — </stong>refers to a particular color sensation, i.e. red, green, yellow, blue, etc. Hue does not exist in reality, it is solely the perception of the visual system responding to light of different frequencies.
<li><stong>Saturation — </stong>the color intensity or purity, reduced by:
<ul><li><stong>tint</stong> (add white), 
<li><stong>shade</stong> (add black), 
<li><stong>tone</stong> (add grey)), 
</ul></ul>
<li><stong>Brightness — </stong>a relative perception, see also perceptual lightness.
<li><stong>Luminance (Y or L) — </stong>a physical measure of visible light intensity. Luminance is mathematically linear as light is in the real world.
<li><stong>Perceived Lightness (L*) — </stong>the perception of physical light intensity. Perceptual lightness is mathematically nonlinear in regards to light in the real world, however, some perceptual models attempt to provide a mathematically linear version of perception which then presents light as non-linear. The symbol L* refers to CIE L*a*b*, and should not be confused with luminance L.
<li><strong>Luma (<em>Y´</em> prime) — </strong> is a gamma encoded, weighted signal used in some video encodings. It is not to be confused with linear luminance.
<li><strong>Gamma — </strong> or transfer curve (TRC) is a curve that is commonly applied to image data for storage or broadcast to reduce perceived noise and improve data utilization.
<li><stong>Contrast — </stong>is a perception of the difference between two objects/elements. There are many forms of contrast, and the different types of contrast interact with and are affected by each other as well as being affected by other aspects of vision.
<ul><li><stong>Lightness contrast:</stong> the difference in lightness and darkness between two items. This is a particularly important form of contrast for information such as text.
<li><stong>Spatial contrast:</stong> in other words contrasts of size. Size contrasts directly affect the perception of lightness contrasts.
<li><stong>Hue contrast: the perception of different light frequencies. Hue contrasts are three times weaker than lightness contrasts, and some people have problems perceiving some hues, so hue should never be a primary design contrast.
<li><stong>Positional contrasts:</stong> the distance and/or orientation between objects is important in object recognition and identification.
<li><stong>Temporal contrasts:</stong> contrasts of time, speed, and change. 
</ul><li><stong>Visual Acuity — </stong>acuity refers to the ability of the eye’s optics to focus light onto the photoreceptors on the back of the eye.
<ul><li>Poor acuity is usually understood as blurry vision or an inability to focus.
</ul><li><stong>Spatial Frequency — </stong>in a practical sense, this refers to the weight of a font, or the stroke width. A thinner font or narrower stroke width is a higher spatial frequency than a bolder or thicker stroke. Higher spatial frequencies require more luminance contrast to be visible than lower frequencies, such as a very bold large headline.
</ul>
	
		
</section>

<section id="section6">
<h2>Changelog</h2>
<div class="guidanceBox">
<h3>Select font characteristics and colors for both the background and the text to provide enough contrast for readability</h3>
</div>
<ul>
<li>New Method 03 February 2020
</ul>
</section>


</div>

  </body>
  <script type="text/javascript" src="magicsauce.js"></script>
</html>
